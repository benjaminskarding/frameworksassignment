import{b as c,c as l}from"./headers-BmPhY2IE.js";import{a as i}from"./authGuard-BZN1f7iU.js";import{a as d}from"./toggleVisibilityOfElements-BjvdhEGM.js";async function g({title:a,body:t,tags:e,media:r}){if(!localStorage.getItem("accessToken"))throw console.error("No access token found."),new Error("No access token found. Please log in.");const n={title:a,body:t,tags:Array.isArray(e)?e:e.split(",").map(o=>o.trim()),media:r?{url:r}:null};console.log("Post data to be sent:",n);try{const o=await fetch(c,{method:"POST",headers:l(),body:JSON.stringify(n)});console.log("Response object:",o);const s=await o.json();if(console.log("Response data (parsed):",s),!o.ok)throw new Error(s.message||"Create post failed");return s}catch(o){throw console.error("Error details:",o),new Error(o.message||"Something went wrong during create post")}}async function m(a){a.preventDefault();const t=new FormData(a.target),e={title:t.get("title"),body:t.get("body"),tags:t.get("tags")?t.get("tags").split(",").map(r=>r.trim()):[],media:t.get("media")||""};console.log("Form data collected for the post:",e);try{await g(e),alert("Post created successfully!"),window.location.href="/"}catch(r){console.error("Error creating post:",r),alert("Failed to create post")}}i();d();const f=document.forms.createPost;f.addEventListener("submit",m);
